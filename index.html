<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Hex Calculator + Feedback Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f9;
      padding: 40px;
      margin: 0;
      transition: background-color 0.5s, color 0.5s;
      color: #2c3e50;
    }
    body.night {
      background: #2c3e50;
      color: #ecf0f1;
    }
    .calculator {
      max-width: 400px;
      margin: auto 0 30px;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      transition: background-color 0.5s, color 0.5s;
      margin: 15px auto;
    }
    body.night .calculator {
      background: #34495e;
      color: #ecf0f1;
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
      box-sizing: border-box;
      border-radius: 6px;
      border: 1.5px solid #ccc;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus, button:focus {
      border-color: #3498db;
      outline: none;
    }
    button {
      background-color: #3498db;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
      border-radius: 6px;
      margin-top: 20px;
    }
    button:hover {
      background-color: #2980b9;
    }
    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 18px;
      text-align: center;
      color: #2c3e50;
    }
    body.night #result {
      color: #ecf0f1;
    }

    footer {
      margin-top: 40px;
      padding: 20px;
      background: #eee;
      border-radius: 10px;
      font-size: 14px;
      color: #555;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      transition: background-color 0.5s, color 0.5s;
    }
    body.night footer {
      background: #34495e;
      color: #bdc3c7;
    }

    /* –ú–æ–¥–∞–ª—å–Ω–µ —Ç–ª–æ */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    /* –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ */
    .modal {
      background: #fff;
      border-radius: 10px;
      padding: 30px 40px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      position: relative;
      color: #2c3e50;
      font-size: 16px;
    }
    body.night .modal {
      background: #34495e;
      color: #ecf0f1;
    }

    /* –ó–∞–∫—Ä–∏—Ç—Ç—è */
    .modal-close {
      position: absolute;
      top: 15px;
      right: 20px;
      background: transparent;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #888;
      transition: color 0.3s ease;
    }
    .modal-close:hover {
      color: #333;
    }
    body.night .modal-close:hover {
      color: #ddd;
    }

    form label {
      display: block;
      margin-bottom: 15px;
      font-weight: bold;
      color: inherit;
    }

    form input[type="email"],
    form textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 16px;
      border: 1.5px solid #ccc;
      border-radius: 6px;
      resize: vertical;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
      color: inherit;
      background: #fff;
    }
    body.night form input[type="email"],
    body.night form textarea {
      background: #2c3e50;
      border-color: #555;
      color: #ecf0f1;
    }
    form input[type="email"]:focus,
    form textarea:focus {
      border-color: #3498db;
      outline: none;
    }

    form textarea {
      min-height: 100px;
    }

    form button[type="submit"] {
      background-color: #3498db;
      color: white;
      font-weight: bold;
      border: none;
      padding: 12px 20px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
    }
    form button[type="submit"]:hover {
      background-color: #2980b9;
    }

    /* –ü–µ—Ä–µ–º–∏–∫–∞—á —Ç–µ–º–∏ */
    #themeSwitcher {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #3498db;
      border: none;
      color: white;
      padding: 10px 15px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s ease;
      z-index: 1100;
    }
    #themeSwitcher:hover {
      background-color: #2980b9;
    }

    /* –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ */
    #comments {
      max-width: 800px;
      margin: 20px auto 40px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 20px;
      color: #2c3e50; 
    }
    body.night #comments {
      background: #34495e;
      color: #ecf0f1;
    }
    #comments h3 {
      margin-top: 0;
      text-align: center;
    }
    .comment {
      border-bottom: 1px solid #ddd; 
      padding: 10px 0;
    }
    .comment:last-child {
      border: none;
    }
    .comment strong {
      display: block;
      margin-bottom: 4px;
    }
  </style>
</head>
<body>

  <button id="themeSwitcher" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ —Ç–µ–º—É">üåû/üåú</button>

  <div class="calculator" role="main" aria-label="HEX –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä">
    <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (16-–∫–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞)</h2>
    <label for="hex1">–ß–∏—Å–ª–æ 1 (HEX):</label>
    <input type="text" id="hex1" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: A3" aria-describedby="hex1desc" />
    <small id="hex1desc">–í–≤–µ–¥—ñ—Ç—å —à—ñ—Å—Ç–Ω–∞–¥—Ü—è—Ç–∫–æ–≤–µ —á–∏—Å–ª–æ (0-9, A-F)</small>

    <label for="operator">–û–ø–µ—Ä–∞—Ü—ñ—è:</label>
    <select id="operator" aria-describedby="operatorDesc">
      <option value="+">–î–æ–¥–∞—Ç–∏</option>
      <option value="-">–í—ñ–¥–Ω—è—Ç–∏</option>
      <option value="*">–ú–Ω–æ–∂–∏—Ç–∏</option>
      <option value="/">–î—ñ–ª–∏—Ç–∏</option>
    </select>
    <small id="operatorDesc">–û–±–µ—Ä—ñ—Ç—å –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é</small>

    <label for="hex2">–ß–∏—Å–ª–æ 2 (HEX):</label>
    <input type="text" id="hex2" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 1F" aria-describedby="hex2desc" />
    <small id="hex2desc">–í–≤–µ–¥—ñ—Ç—å —à—ñ—Å—Ç–Ω–∞–¥—Ü—è—Ç–∫–æ–≤–µ —á–∏—Å–ª–æ (0-9, A-F)</small>

    <button onclick="calculateHex()" aria-live="polite" aria-atomic="true">–û–±—á–∏—Å–ª–∏—Ç–∏</button>

    <div id="result" role="region" aria-live="polite" aria-atomic="true"></div>
  </div>

  <section id="comments" aria-label="–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ">
    <h3>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ (–≤–∞—Ä—ñ–∞–Ω—Ç 3)</h3>
    <div id="commentsContainer">
      –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤...
    </div>
  </section>

  <footer aria-label="–ó–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ">
    <h3>–ó–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ —É localStorage</h3>
    <div>
      <strong>hex1:</strong> <span id="storageHex1">–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ</span><br/>
      <strong>operator:</strong> <span id="storageOperator">–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ</span><br/>
      <strong>hex2:</strong> <span id="storageHex2">–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ</span><br/>
      <strong>result:</strong> <span id="storageResult">–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ</span>
    </div>
  </footer>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
  <div class="modal-overlay" id="feedbackModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <button class="modal-close" id="closeModal" aria-label="–ó–∞–∫—Ä–∏—Ç–∏ —Ñ–æ—Ä–º—É">&times;</button>
      <h2 id="modalTitle">–§–æ—Ä–º–∞ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –∑–≤‚Äô—è–∑–∫—É</h2>

      <form action="https://formspree.io/f/xqabkqpg" method="POST">
        <label>
          Your email:
          <input type="email" name="email" required autocomplete="email" />
        </label>
        <label>
          Your message:
          <textarea name="message" required></textarea>
        </label>
        <button type="submit">Send</button>
      </form>
    </div>
  </div>

<script>
  // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤ HEX
  function calculateHex() {
    const hex1Input = document.getElementById('hex1');
    const hex2Input = document.getElementById('hex2');
    const operator = document.getElementById('operator').value;
    const resultEl = document.getElementById('result');

    let hex1 = hex1Input.value.trim().toUpperCase();
    let hex2 = hex2Input.value.trim().toUpperCase();

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ HEX (0-9, A-F)
    const validHex = /^[0-9A-F]+$/;
    if (!validHex.test(hex1)) {
      resultEl.textContent = '–ü–µ—Ä—à–µ —á–∏—Å–ª–æ –Ω–µ —î –≤–∞–ª—ñ–¥–Ω–∏–º HEX —á–∏—Å–ª–æ–º.';
      return;
    }
    if (!validHex.test(hex2)) {
      resultEl.textContent = '–î—Ä—É–≥–µ —á–∏—Å–ª–æ –Ω–µ —î –≤–∞–ª—ñ–¥–Ω–∏–º HEX —á–∏—Å–ª–æ–º.';
      return;
    }

    let num1 = parseInt(hex1, 16);
    let num2 = parseInt(hex2, 16);
    let res;

    switch (operator) {
      case '+': res = num1 + num2; break;
      case '-': res = num1 - num2; break;
      case '*': res = num1 * num2; break;
      case '/':
        if (num2 === 0) {
          resultEl.textContent = '–î—ñ–ª–µ–Ω–Ω—è –Ω–∞ –Ω—É–ª—å –Ω–µ–º–æ–∂–ª–∏–≤–µ.';
          return;
        }
        res = Math.floor(num1 / num2);
        break;
      default:
        resultEl.textContent = '–ù–µ–≤—ñ–¥–æ–º–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è.';
        return;
    }

    // –í—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É HEX, –≤–µ–ª–∏–∫–∏–º–∏ –ª—ñ—Ç–µ—Ä–∞–º–∏
    let resHex = res.toString(16).toUpperCase();

    // –ó–±–µ—Ä–µ–≥—Ç–∏ —É localStorage
    localStorage.setItem('hex1', hex1);
    localStorage.setItem('operator', operator);
    localStorage.setItem('hex2', hex2);
    localStorage.setItem('result', resHex);

    // –í—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    resultEl.textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${resHex}`;
    updateFooter();
  }

  // –í—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –¥–∞–Ω—ñ —É —Ñ—É—Ç–µ—Ä—ñ
  function updateFooter() {
    document.getElementById('storageHex1').textContent = localStorage.getItem('hex1') || '–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ';
    document.getElementById('storageOperator').textContent = localStorage.getItem('operator') || '–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ';
    document.getElementById('storageHex2').textContent = localStorage.getItem('hex2') || '–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ';
    document.getElementById('storageResult').textContent = localStorage.getItem('result') || '–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ';
  }

  updateFooter();

  // –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ - –ø–æ–∫–∞–∑ —á–µ—Ä–µ–∑ 1 —Ö–≤–∏–ª–∏–Ω—É
  setTimeout(() => {
    document.getElementById('feedbackModal').style.display = 'flex';
  }, 6000);

  // –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª–∫–∏
  document.getElementById('closeModal').addEventListener('click', () => {
    document.getElementById('feedbackModal').style.display = 'none';
  });

  // –ó–∞–∫—Ä–∏—Ç—Ç—è –ø—Ä–∏ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –º–æ–¥–∞–ª–∫–æ—é
  document.getElementById('feedbackModal').addEventListener('click', e => {
    if (e.target === e.currentTarget) {
      e.currentTarget.style.display = 'none';
    }
  });

  // –ü–µ—Ä–µ–º–∏–∫–∞—á —Ç–µ–º–∏: –Ω—ñ—á/–¥–µ–Ω—å
  const themeSwitcher = document.getElementById('themeSwitcher');

  function setTheme(isNight) {
    if (isNight) {
      document.body.classList.add('night');
    } else {
      document.body.classList.remove('night');
    }
  }

  function toggleTheme() {
    const isNight = document.body.classList.contains('night');
    setTheme(!isNight);
  }

  themeSwitcher.addEventListener('click', toggleTheme);

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä —Ç–µ–º–∏ –∑–∞ —á–∞—Å–æ–º (20:00 - 7:00 –Ω—ñ—á–Ω–∞)
  function autoTheme() {
    const now = new Date();
    const hour = now.getHours();
    if (hour >= 20 || hour < 7) {
      setTheme(true);
    } else {
      setTheme(false);
    }
  }

  autoTheme();

  // –ó–∞–ø–∏—Ç –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –∑ JSONPlaceholder (–∑–∞–º—ñ–Ω—ñ—Ç—å –≤–∞—Ä—ñ–∞–Ω—Ç 1 –Ω–∞ —Å–≤—ñ–π, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
  async function fetchComments() {
    try {
      const res = await fetch('https://jsonplaceholder.typicode.com/comments?postId=3');
      if (!res.ok) throw new Error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤');
      const comments = await res.json();

      const container = document.getElementById('commentsContainer');
      container.innerHTML = '';
      comments.forEach(c => {
        const div = document.createElement('div');
        div.classList.add('comment');
        div.innerHTML = `<strong>${c.name} (${c.email}):</strong><p>${c.body}</p>`;
        container.appendChild(div);
      });
    } catch (error) {
      document.getElementById('commentsContainer').textContent = '–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ.';
      console.error(error);
    }
  }

  fetchComments();
</script>

</body> 
</html> 
